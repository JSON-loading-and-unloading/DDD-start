<h1>CQRS</h1>

<h2>단일 모델의 단점</h2>

우리가 객제 지향으로 도메인 모델을 구현할 때 주로 사용하는 ORM 기법은 도메인 상태 변경 기능을 구현하는데 적합하지만, </br>
주문 상세 조회 화면처럼 여러 애그리거트에서 데이터를 가져와 출력하는 기능을 구현하기에는 고려할 게 많아서 구현을 복잡하게 만드는 원인이 된다.</br>


<h2>CQRS</h2>

시스템이 제공하는 기능은 두 가지로 나눌 수 있다.</br></br>

1. 상태를 변경하는 기능 : 한 애그리거트의 상태를 변경</br>
2. 상태 정보를 조회하는 기능 : 두 개시상의 애그리거트가 필요할 때가 많다.</br></br>

위 조회와 같은 복잡성을 해결해주기 위한 방법이 CQRS이다.</br>
CQRS는 명령을 위한 모델과 상태를 제공하는 조회를 위한 모델을 분리하는 패턴이다.</br></br>

![images](https://github.com/JSON-loading-and-unloading/DDD-start/assets/106163272/1c7693be-2d77-4ccf-a67a-46ca1fd468a8)

CQRS를 사용하면 각 모델에 맞는 구현 기술을 선택할 수 있다.</br>
명령 모델은 객체지향을 기반해서 도메인 모델을 구현하기에는 적당한 JPA를 사용해서 구현하고,</br>
조회 모델은 DB테이블에서 SQL로 데이터를 조회할 때 좋은 마이바티스를 사용해서 구현하면 된다.</br>

![images](https://github.com/JSON-loading-and-unloading/DDD-start/assets/106163272/2c5bce12-04bb-4ed8-a5b1-78ac6bd048a9)


위 그림처럼 명령, 조회로 나눌 수 있다.</br></br>



다른 방법으로는 명령 모델과 조회 모델이 서로 다른 db를 사용할 수 있다.</br></br>

명령모델에서 상태를 변경하면 이에 해당하는 이벤트가 발생하고, 그 이벤트를 조회 모델에 전달해서 변경 내역을 반영한다.</br>



<h2>CQRS 장단점</h2>

장점</br>
1. 명령 모델을 구현할 때 도메인 자체에 집중할 수 있다.</br>
2. 조회 성능을 향상시키는 데 유리하다.</br></br>

단점</br>
1. 구현해야 할 코드가 더 많아진다.</br>
2. 더 많은 구현 기술이 필요하다.</br>

   
